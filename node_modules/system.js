        $(function() {
            var socket = io();
            if(localStorage.getItem('nick') != undefined){
                var nick = localStorage.getItem('nick');
            }
            else{
                var nick = prompt('please enter nickname');
            }
            
            socket.on('connect',function(){
                socket.emit('welcome', nick + " has connected");
            });
            
            socket.on('getName',function(){
                socket.emit('getName', nick);
            });
            
            $('form').submit(function(){
                socket.emit('chat message', nick + ": " + $('#m').val());
                $('#m').val('');
                return false;
            });
            
            socket.on('chat message', function(msg){
                $('#messages').append($('<li>').text(msg));
            });
            
            socket.on('welcome', function(msg){
                $('#messages').append($('<li>').text(msg));
            });
            
            socket.on('goodbye', function(msg){
                $('#messages').append($('<li>').text(msg + " has disconnected"));
            });
            
            socket.on('typing', function(msg){
                $('#messages').append($('<li>').text(msg));
            });
            
            localStorage.setItem('nick', nick);
            
            if(document.activeElement == this){
                console.log('test')
                socket.emit('typing', nick + ' is typing');  
            }
        });